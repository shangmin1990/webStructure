<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <title>AdminLTE-template</title>
  <!-- Tell the browser to be responsive to screen width -->
  <meta content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no" name="viewport">
  <!-- Bootstrap 3.3.6 -->
  <link rel="stylesheet" href="lib/bootstrap/dist/css/bootstrap.min.css">
  <link rel="stylesheet" href="lib/AdminLTE/dist/css/AdminLTE.min.css">
  <link rel="stylesheet" href="lib/sweetalert/dist/sweetalert.css"/>
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
  <!--<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>-->
  <!--<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>-->
  <![endif]-->
</head>
<body class="hold-transition login-page">
<div class="login-box">
  <div class="login-logo">
    <a><b>Admin</b>Ad</a>
  </div>
  <!-- /.login-logo -->
  <div class="login-box-body">
    <p class="login-box-msg">登录</p>

    <form >
      <div class="form-group has-feedback">
        <input type="text" class="form-control" id="username" placeholder="用户名">
        <span class="glyphicon glyphicon-user form-control-feedback"></span>
      </div>
      <div class="form-group has-feedback">
        <input type="password" id="password" class="form-control" placeholder="密码">
        <span class="glyphicon glyphicon-lock form-control-feedback"></span>
      </div>
      <div class="row">
        <div class="col-xs-8">
          <!--<div class="checkbox icheck">-->
            <!--<label>-->
              <!--<input type="checkbox"> Remember Me-->
            <!--</label>-->
          <!--</div>-->
        </div>
        <!-- /.col -->
        <div class="col-xs-4">
          <a  class="btn btn-primary btn-block btn-flat">登录</a>
        </div>
        <!-- /.col -->
      </div>
    </form>

  </div>
  <!-- /.login-box-body -->
</div>
<script src="lib/jquery/dist/jquery.min.js"></script>
<script src="lib/sweetalert/dist/sweetalert.min.js"></script>
<script>
  $(function () {
    $(document).on('keydown', function(evt){
      if(evt.keyCode == 13){
        login();
      }
    })
    $('a').on('click', function(evt){
//      evt.preventDefault();
      login();
    })

    /**
     * 需要修改
     */
    function login() {
      $.post('/m/login', {
        username: $('#username').val(),
        password: $('#password').val(),
        grant_type: 'password',
        type: 'admin'
      }, function(res){
        if(res.code == 10004){
          swal('用户名或密码错误');
        } else if(res.code == 200){
          location.href = '/';
        } else {
          swal('未知错误, 错误码: ' + res.code )
        }
      })
    }
  });
</script>
</body>
</html>
